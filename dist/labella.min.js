!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.labella=r():t.labella=r()}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";t.exports={Node:e(1),Force:e(2),Distributor:e(3),Renderer:e(10),util:e(11)}},function(t,r){"use strict";var e=function(t,r,e){this.idealPos=t,this.currentPos=t,this.width=r,this.data=e,this.layerIndex=0},n=e.prototype;n.distanceFrom=function(t){var r=this.width/2,e=t.width/2;return Math.max(this.currentPos-r,t.currentPos-e)-Math.min(this.currentPos+r,t.currentPos+e)},n.moveToIdealPosition=function(){return this.currentPos=this.idealPos,this},n.displacement=function(){return this.idealPos-this.currentPos},n.overlapWithNode=function(t,r){return r=null===r||void 0===r?0:r,this.distanceFrom(t)-r<0},n.overlapWithPoint=function(t){var r=this.width/2;return t>=this.currentPos-r&&t<=this.currentPos+r},n.positionBefore=function(t,r){return r=r?r:0,t.currentLeft()-this.width/2-r},n.positionAfter=function(t,r){return r=r?r:0,t.currentRight()+this.width/2+r},n.currentRight=function(){return this.currentPos+this.width/2},n.currentLeft=function(){return this.currentPos-this.width/2},n.idealRight=function(){return this.idealPos+this.width/2},n.idealLeft=function(){return this.idealPos-this.width/2},n.createStub=function(t){var r=new e(this.idealPos,t,this.data);return r.currentPos=this.currentPos,r.child=this,this.parent=r,r},n.removeStub=function(){return this.parent&&(this.parent.child=null,this.parent=null),this},n.isStub=function(){return!!this.child},n.getPathToRoot=function(){for(var t=[],r=this;r;)t.push(r),r=r.parent;return t},n.getPathFromRoot=function(){return this.getPathToRoot().reverse()},n.getPathToRootLength=function(){for(var t=0,r=this;r;){var e=r.parent?r.parent.currentPos:r.idealPos;t+=Math.abs(r.currentPos-e),r=r.parent}return t},n.getRoot=function(){for(var t=this,r=this;r;)t=r,r=r.parent;return t},n.getLayerIndex=function(){return this.layerIndex},n.clone=function(){var t=new e(this.idealPos,this.width,this.data);return t.currentPos=this.currentPos,t.layerIndex=this.layerIndex,t},t.exports=e},function(t,r,e){"use strict";var n=e(3),i=e(4),o=e(8),s={nodeSpacing:3,minPos:0,maxPos:null,algorithm:"overlap",density:.85,stubWidth:1},u=function(t){var r={},e=i.extend({},s),u=new n,a=[],h=null;return r.nodes=function(t){return arguments.length?(a=t,h=null,r):a},r.getLayers=function(){return h},r.options=function(t){if(!arguments.length)return e;e=i.extend(e,t);var o=i.pick(e,Object.keys(n.DEFAULT_OPTIONS));return i.isDefined(e.minPos)&&i.isDefined(e.maxPos)?o.layerWidth=e.maxPos-e.minPos:o.layerWidth=null,u.options(o),r},r.options(t),r.compute=function(){var t=i.pick(e,Object.keys(o.DEFAULT_OPTIONS));return a.forEach(function(t){t.removeStub()}),h=u.distribute(a),h.map(function(r,e){r.forEach(function(t){t.layerIndex=e}),o(r,t)}),r},r.start=function(){console.log("[warning] force.start() is deprecated. Please use force.compute() instead.")},r};u.DEFAULT_OPTIONS=s,t.exports=u},function(t,r,e){"use strict";var n=e(4),i=e(6),o={algorithm:"overlap",layerWidth:1e3,density:.75,nodeSpacing:3,stubWidth:1},s=function(t){var r={};t=n.extend({},o,t),r.options=function(e){return arguments.length?(t=n.extend(t,e),r):t},r.computeRequiredWidth=function(r){return n.sum(r,function(r){return r.width+t.nodeSpacing})-t.nodeSpacing},r.maxWidthPerLayer=function(){return t.density*t.layerWidth},r.needToSplit=function(t){return r.estimateRequiredLayers(t)>1},r.estimateRequiredLayers=function(e){return t.layerWidth?Math.ceil(r.computeRequiredWidth(e)/r.maxWidthPerLayer()):1};var e={simple:function(e){for(var n=r.estimateRequiredLayers(e),i=[],o=0;n>o;o++)i.push([]);return e.forEach(function(r,e){var o=e%n;i[o].push(r);for(var s=r,u=o-1;u>=0;u--)s=s.createStub(t.stubWidth),i[u].push(s)}),i},roundRobin:function(t){var r=[];return r},overlap:function(e){for(var n=[],i=r.maxWidthPerLayer(),o=e.concat(),s=r.computeRequiredWidth(o);s>i;){r.countIdealOverlaps(o);var u=o.concat(),a=s;for(o=[];u.length>2&&a>i;){u.sort(function(t,r){return r.overlapCount-t.overlapCount});var h=u.shift();a-=h.width,a+=t.stubWidth,h.overlaps.forEach(function(t){t.overlapCount--}),o.push(h)}n.push(u),s=r.computeRequiredWidth(o)}o.length>0&&n.push(o);for(var c=n.length-1;c>=1;c--)for(var f=n[c],l=0;l<f.length;l++){var p=f[l];if(!p.isStub())for(var d=p,v=c-1;v>=0;v--)d=d.createStub(t.stubWidth),n[v].push(d)}return n}};return r.countIdealOverlaps=function(r){var e=new i(t.layerWidth/2);return r.forEach(function(t){e.add([t.idealLeft(),t.idealRight(),t])}),r.forEach(function(t){var r=e.search(t.idealLeft(),t.idealRight());t.overlaps=r,t.overlapCount=r.length}),r},r.distribute=function(i){if(!i||0===i.length)return[];if("none"==t.algorithm||!n.isDefined(t.algorithm))return[i];if(!r.needToSplit(i))return[i];if(i=i.concat().sort(function(t,r){return t.idealPos-r.idealPos}),"function"==typeof t.algorithm)return t.algorithm(i,t);if(e.hasOwnProperty(t.algorithm))return e[t.algorithm](i);throw"Unknown algorithm: "+t.algorithm},r};s.DEFAULT_OPTIONS=o,t.exports=s},function(t,r,e){"use strict";var n=e(5);t.exports={extend:function(){return n.apply(this,arguments)},isDefined:function(t){return null!==t&&void 0!==t},pick:function(t,r){return r.reduce(function(r,e){return r[e]=t[e],r},{})},sum:function(t,r){return t.map(r).reduce(function(t,r){return t+r},0)}}},function(t,r){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},s=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var r=n.call(t,"constructor"),e=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!e)return!1;var o;for(o in t);return void 0===o||n.call(t,o)};t.exports=function u(){var t,r,n,i,a,h,c=arguments[0],f=1,l=arguments.length,p=!1;for("boolean"==typeof c?(p=c,c=arguments[1]||{},f=2):("object"!==("undefined"==typeof c?"undefined":e(c))&&"function"!=typeof c||null==c)&&(c={});l>f;++f)if(t=arguments[f],null!=t)for(r in t)n=c[r],i=t[r],c!==i&&(p&&i&&(s(i)||(a=o(i)))?(a?(a=!1,h=n&&o(n)?n:[]):h=n&&s(n)?n:{},c[r]=u(p,h,i)):void 0!==i&&(c[r]=i));return c}},function(t,r,e){"use strict";function n(t,r){if(r||(r={}),this.startKey=r.startKey||0,this.endKey=r.endKey||1,this.intervalHash={},this.pointTree=new h({compare:function(t,r){if(null==t)return-1;if(null==r)return 1;var e=t[0]-r[0];return e>0?1:0==e?0:-1}}),this._autoIncrement=0,!t||"number"!=typeof t)throw new Error("you must specify center index as the 2nd argument.");this.root=new u(t,this)}function i(t,r){return r.end<t.idx?(t.left||(t.left=new u(r.start+r.end>>1,this)),i.call(this,t.left,r)):t.idx<r.start?(t.right||(t.right=new u(r.start+r.end>>1,this)),i.call(this,t.right,r)):t.insert(r)}function o(t,r,e){return t?r<t.idx?(t.starts.every(function(t){var n=t.start<=r;return n&&e.push(t.result()),n}),o.call(this,t.left,r,e)):r>t.idx?(t.ends.every(function(t){var n=t.end>=r;return n&&e.push(t.result()),n}),o.call(this,t.right,r,e)):void t.starts.map(function(t){e.push(t.result())}):void 0}function s(t,r,e){if(0>=r-t)throw new Error("end must be greater than start. start: "+t+", end: "+r);var n={},i=[];o.call(this,this.root,t+r>>1,i,!0),i.forEach(function(t){n[t.id]=!0});for(var s=this.pointTree.bsearch([t,null]),u=this.pointTree;s>=0&&u[s][0]==t;)s--;var a=this.pointTree.bsearch([r,null]);if(a>=0){for(var h=u.length-1;h>=a&&u[a][0]<=r;)a++;u.slice(s+1,a).forEach(function(t){var r=t[1];n[r]=!0},this),Object.keys(n).forEach(function(n){var i=this.intervalHash[n];e.push(i.result(t,r))},this)}}function u(t){this.idx=t,this.starts=new h({compare:function(t,r){if(null==t)return-1;if(null==r)return 1;var e=t.start-r.start;return e>0?1:0==e?0:-1}}),this.ends=new h({compare:function(t,r){if(null==t)return-1;if(null==r)return 1;var e=t.end-r.end;return 0>e?1:0==e?0:-1}})}function a(t,r,e,n){if(this.id=r,this.start=t[e],this.end=t[n],this.data=t,"number"!=typeof this.start||"number"!=typeof this.end)throw new Error("start, end must be number. start: "+this.start+", end: "+this.end);if(this.start>=this.end)throw new Error("start must be smaller than end. start: "+this.start+", end: "+this.end)}var h=e(7);n.prototype.add=function(t,r){if(this.intervalHash[r])throw new Error("id "+r+" is already registered.");if(void 0==r){for(;this.intervalHash[this._autoIncrement];)this._autoIncrement++;r=this._autoIncrement}var e=new a(t,r,this.startKey,this.endKey);this.pointTree.insert([e.start,r]),this.pointTree.insert([e.end,r]),this.intervalHash[r]=e,this._autoIncrement++,i.call(this,this.root,e)},n.prototype.search=function(t,r){var e=[];if("number"!=typeof t)throw new Error(t+": invalid input");if(void 0==r)o.call(this,this.root,t,e);else{if("number"!=typeof r)throw new Error(t+","+r+": invalid input");s.call(this,t,r,e)}return e},n.prototype.remove=function(t){},u.prototype.insert=function(t){this.starts.insert(t),this.ends.insert(t)},a.prototype.result=function(t,r){var e={id:this.id,data:this.data};if("number"==typeof t&&"number"==typeof r){var n=Math.max(this.start,t),i=Math.min(this.end,r),o=i-n;e.rate1=o/(r-t),e.rate2=o/(this.end-this.start)}return e},t.exports=n},function(t,r){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n=function i(){var t=null,r={},n=arguments;["0","1"].forEach(function(i){var o=n[i];Array.isArray(o)?t=o:o&&"object"==("undefined"==typeof o?"undefined":e(o))&&(r=o)}),"function"==typeof r.filter&&(this._filter=r.filter),"function"==typeof r.compare?this._compare=r.compare:"string"==typeof r.compare&&i.compares[r.compare]&&(this._compare=i.compares[r.compare]),this._unique=!!r.unique,r.resume&&t?t.forEach(function(t,r){this.push(t)},this):t&&this.insert.apply(this,t)};n.create=function(t,r){return new n(t,r)},n.prototype=new Array,n.prototype.constructor=Array.prototype.constructor,n.prototype.insertOne=function(t){var r=this.bsearch(t);return this._unique&&null!=this.key(t,r)?!1:this._filter(t,r)?(this.splice(r+1,0,t),r+1):!1},n.prototype.insert=function(){return Array.prototype.map.call(arguments,function(t){return this.insertOne(t)},this)},n.prototype.remove=function(t){return this.splice(t,1),this},n.prototype.bsearch=function(t){if(!this.length)return-1;for(var r,e=0,n=this.length;n-e>1;){r=Math.floor((e+n)/2);var i=this[r],o=this._compare(t,i);if(0==o)return r;o>0?e=r:n=r}return 0==e&&this._compare(this[0],t)>0?-1:e},n.prototype.key=function(t,r){null==r&&(r=this.bsearch(t));var e=r;if(-1==e||this._compare(this[e],t)<0)return e+1<this.length&&0==this._compare(this[e+1],t)?e+1:null;for(;e>=1&&0==this._compare(this[e-1],t);)e--;return e},n.prototype.keys=function(t,r){var e=[];null==r&&(r=this.bsearch(t));for(var n=r;n>=0&&0==this._compare(this[n],t);)e.push(n),n--;var i=this.length;for(n=r+1;i>n&&0==this._compare(this[n],t);)e.push(n),n++;return e.length?e:null},n.prototype.unique=function(t){if(t)return this.filter(function(t,r){return 0==r||0!=this._compare(this[r-1],t)},this);var r=0;return this.map(function(t,e){return 0==e||0!=this._compare(this[e-1],t)?null:e-r++},this).forEach(function(t){null!=t&&this.remove(t)},this),this},n.prototype.toArray=function(){return this.slice()},n.prototype._filter=function(t,r){return!0},n.compares={number:function(t,r){var e=t-r;return e>0?1:0==e?0:-1},string:function(t,r){return t>r?1:t==r?0:-1}},n.prototype._compare=n.compares.string,t.exports=n},function(t,r,e){"use strict";function n(t){return t[t.length-1]}function i(t){var r=new u.Variable(t.targetPos);return r.node=t,r}function o(t,r){if(t.length>0){r=s.extend(a,r),t.forEach(function(t){t.targetPos=t.parent?t.parent.currentPos:t.idealPos}),t.sort(function(t,r){var e=t.targetPos-r.targetPos;return 0!==e?e:t.isStub()-r.isStub()});for(var e=t.map(i),o=[],h=1;h<e.length;h++){var c,f=e[h-1],l=e[h];c=f.node.isStub()&&l.node.isStub()?(f.node.width+l.node.width)/2+r.lineSpacing:(f.node.width+l.node.width)/2+r.nodeSpacing,o.push(new u.Constraint(f,l,c))}if(s.isDefined(r.minPos)){var p=new u.Variable(r.minPos,1e10),d=e[0];o.push(new u.Constraint(p,d,d.node.width/2)),e.unshift(p)}if(s.isDefined(r.maxPos)){var v=new u.Variable(r.maxPos,1e10),y=n(e);o.push(new u.Constraint(y,v,y.node.width/2)),e.push(v)}var m=new u.Solver(e,o);m.solve(),e.filter(function(t){return t.node}).map(function(t){return t.node.currentPos=Math.round(t.position()),t})}return t}var s=e(4),u=e(9),a={lineSpacing:2,nodeSpacing:3,minPos:0,maxPos:null};o.DEFAULT_OPTIONS=a,t.exports=o},function(t,r){"use strict";var e={},n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var r=this.scale/t.scale,e=t.offset/t.scale,n=t.weight;this.AB+=n*r*e,this.AD+=n*r*t.desiredPosition,this.A2+=n*r*r},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var i=function(){function t(t,r,e,n){void 0===n&&(n=!1),this.left=t,this.right=r,this.gap=e,this.equality=n,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=r,this.gap=e,this.equality=n}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=i;var o=function(){function t(t,r,e){void 0===r&&(r=1),void 0===e&&(e=1),this.desiredPosition=t,this.weight=r,this.scale=e,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,r){var e=function(e,n){return e.active&&t!==n&&r(e,n)};this.cOut.forEach(function(t){return e(t,t.right)}),this.cIn.forEach(function(t){return e(t,t.left)})},t}();e.Variable=o;var s=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,r=this.vars.length;r>t;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,r,e){var n=this,i=t.dfdv();return t.visitNeighbours(r,function(r,o){var s=n.compute_lm(o,t,e);o===r.right?(i+=s*r.left.scale,r.lm=s):(i+=s*r.right.scale,r.lm=-s),e(r)}),i/t.scale},t.prototype.populateSplitBlock=function(t,r){var e=this;t.visitNeighbours(r,function(r,n){n.offset=t.offset+(n===r.right?r.gap:-r.gap),e.addVariable(n),e.populateSplitBlock(n,t)})},t.prototype.traverse=function(t,r,e,n){var i=this;void 0===e&&(e=this.vars[0]),void 0===n&&(n=null),e.visitNeighbours(n,function(n,o){r.push(t(n)),i.traverse(t,r,o,e)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(r){!r.equality&&(null===t||r.lm<t.lm)&&(t=r)}),t},t.prototype.findMinLMBetween=function(t,r){this.compute_lm(t,null,function(){});var e=null;return this.findPath(t,null,r,function(t,r){!t.equality&&t.right===r&&(null===e||t.lm<e.lm)&&(e=t)}),e},t.prototype.findPath=function(t,r,e,n){var i=this,o=!1;return t.visitNeighbours(r,function(r,s){o||s!==e&&!i.findPath(s,t,e,n)||(o=!0,n(r,s))}),o},t.prototype.isActiveDirectedPathBetween=function(t,r){if(t===r)return!0;for(var e=t.cOut.length;e--;){var n=t.cOut[e];if(n.active&&this.isActiveDirectedPathBetween(n.right,r))return!0}return!1},t.split=function(r){return r.active=!1,[t.createSplitBlock(r.left),t.createSplitBlock(r.right)]},t.createSplitBlock=function(r){var e=new t(r);return e.populateSplitBlock(r,null),e},t.prototype.splitBetween=function(r,e){var n=this.findMinLMBetween(r,e);if(null!==n){var i=t.split(n);return{constraint:n,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,r,e){r.active=!0;for(var n=0,i=t.vars.length;i>n;++n){var o=t.vars[n];o.offset+=e,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,r=this.vars.length;r--;){var e=this.vars[r],n=e.position()-e.desiredPosition;t+=n*n*e.weight}return t},t}();e.Block=s;var u=function(){function t(t){this.vs=t;var r=t.length;for(this.list=new Array(r);r--;){var e=new s(t[r]);this.list[r]=e,e.blockInd=r}}return t.prototype.cost=function(){for(var t=0,r=this.list.length;r--;)t+=this.list[r].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var r=this.list.length-1,e=this.list[r];this.list.length=r,t!==e&&(this.list[t.blockInd]=e,e.blockInd=t.blockInd)},t.prototype.merge=function(t){var r=t.left.block,e=t.right.block,n=t.right.offset-t.left.offset-t.gap;r.vars.length<e.vars.length?(e.mergeAcross(r,t,n),this.remove(r)):(r.mergeAcross(e,t,-n),this.remove(e))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var r=this;this.updateBlockPositions(),this.list.forEach(function(e){var n=e.findMinLM();null!==n&&n.lm<a.LAGRANGIAN_TOLERANCE&&(e=n.left.block,s.split(n).forEach(function(t){return r.insert(t)}),r.remove(e),t.push(n))})},t}();e.Blocks=u;var a=function(){function t(t,r){this.vs=t,this.cs=r,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=r,r.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=r.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new u(this.vs),this.bs.forEach(function(r,e){return r.posn=t[e]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(r,e){return r.desiredPosition=t[e]})},t.prototype.mostViolated=function(){for(var r=Number.MAX_VALUE,e=null,n=this.inactive,i=n.length,o=i,s=0;i>s;++s){var u=n[s];if(!u.unsatisfiable){var a=u.slack();if((u.equality||r>a)&&(r=a,e=u,o=s,u.equality))break}}return o!==i&&(r<t.ZERO_UPPERBOUND&&!e.active||e.equality)&&(n[o]=n[i-1],n.length=i-1),e},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new u(this.vs)),this.bs.split(this.inactive);for(var r=null;(r=this.mostViolated())&&(r.equality||r.slack()<t.ZERO_UPPERBOUND&&!r.active);){var e=r.left.block,n=r.right.block;if(e!==n)this.bs.merge(r);else{if(e.isActiveDirectedPathBetween(r.right,r.left)){r.unsatisfiable=!0;continue}var i=e.splitBetween(r.left,r.right);if(null===i){r.unsatisfiable=!0;continue}this.bs.insert(i.lb),this.bs.insert(i.rb),this.bs.remove(e),this.inactive.push(i.constraint),r.slack()>=0?this.inactive.push(r):this.bs.merge(r)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,r=this.bs.cost();Math.abs(t-r)>1e-4;)this.satisfy(),t=r,r=this.bs.cost();return r},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=a,t.exports=e},function(t,r,e){"use strict";function n(t){this.options=h.extend({layerGap:60,nodeHeight:10,direction:"down"},t)}function i(t){return"L "+t.join(" ")}function o(t){return"M "+t.join(" ")}function s(t,r,e){return"C "+t.join(" ")+" "+r.join(" ")+" "+e.join(" ")}function u(t,r){var e=(t[1]+r[1])/2;return s([t[0],e],[r[0],e],r)}function a(t,r){var e=(t[0]+r[0])/2;return s([e,t[1]],[e,r[1]],r)}var h=e(4);n.prototype.getWaypoints=function(t){var r=this.options,e=r.direction,n=t.getPathFromRoot(),i=r.nodeHeight+r.layerGap;return"left"===e?[[[0,n[0].idealPos]]].concat(n.map(function(t,e){var n=i*(e+1)*-1;return[[n+r.nodeHeight,t.currentPos],[n,t.currentPos]]})):"right"===e?[[[0,n[0].idealPos]]].concat(n.map(function(t,e){var n=i*(e+1);return[[n-r.nodeHeight,t.currentPos],[n,t.currentPos]]})):"up"===e?[[[n[0].idealPos,0]]].concat(n.map(function(t,e){var n=i*(e+1)*-1;return[[t.currentPos,n+r.nodeHeight],[t.currentPos,n]]})):[[[n[0].idealPos,0]]].concat(n.map(function(t,e){var n=i*(e+1);return[[t.currentPos,n-r.nodeHeight],[t.currentPos,n]]}))},n.prototype.layout=function(t){var r=this.options,e=r.layerGap+r.nodeHeight;switch(r.direction){case"left":t.forEach(function(t){var n=t.getLayerIndex()*e+r.layerGap;t.x=-n-r.nodeHeight,t.y=t.currentPos,t.dx=r.nodeHeight,t.dy=t.width});break;case"right":t.forEach(function(t){var n=t.getLayerIndex()*e+r.layerGap;t.x=n,t.y=t.currentPos,t.dx=r.nodeHeight,t.dy=t.width});break;case"up":t.forEach(function(t){var n=t.getLayerIndex()*e+r.layerGap;t.x=t.currentPos,t.y=-n-r.nodeHeight,t.dx=t.width,t.dy=r.nodeHeight});break;default:case"down":t.forEach(function(t){var n=t.getLayerIndex()*e+r.layerGap;t.x=t.currentPos,t.y=n,t.dx=t.width,t.dy=r.nodeHeight})}return t},n.prototype.generatePath=function(t){var r=this.options,e=r.direction,n=this.getWaypoints(t,e),s=[o(n[0][0])];return"left"===e||"right"===e?n.reduce(function(t,r,e){return s.push(a(t[t.length-1],r[0])),e<n.length-1&&s.push(i(r[1])),r}):n.reduce(function(t,r,e){return s.push(u(t[t.length-1],r[0])),e<n.length-1&&s.push(i(r[1])),r}),s.join(" ")},t.exports=n},function(t,r,e){"use strict";var n=e(1),i=e(4);t.exports={generateNodes:function(t,r){var e=[];r=i.extend({},{minWidth:20,maxWidth:20,minPos:0,maxPos:800},r);for(var o=r.maxPos-r.minPos,s=r.maxWidth-r.minWidth,u=0;t>u;u++)e.push(new n(Math.floor(Math.random()*o)+r.minPos,Math.floor(Math.random()*s)+r.minWidth));return e}}}])});